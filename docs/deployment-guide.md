# Deployment Guide

**Project:** Auto Note Mover Plus (Obsidian Plugin)
**Last Updated:** 2025-11-25

## Overview

This plugin is deployed as an Obsidian community plugin through GitHub releases. The deployment process is automated using GitHub Actions.

## Release Process

### Automated Release (GitHub Actions)

The project uses a GitHub Actions workflow for automated releases.

**Workflow File:** `.github/workflows/release.yml`

#### Trigger

Releases are triggered by pushing a Git tag:

```bash
git tag -a 1.2.0 -m "Release version 1.2.0"
git push origin 1.2.0
```

#### Workflow Steps

1. **Checkout Code**

    - Uses: `actions/checkout@v2`

2. **Setup Node.js**

    - Version: `16.x`
    - Uses: `actions/setup-node@v1`

3. **Build Plugin**

    - Install dependencies: `npm install`
    - Run production build: `npm run build`
    - Creates plugin folder with required files
    - Packages as ZIP file

4. **Create GitHub Release**

    - Creates release from tag
    - Release name matches tag name
    - Not a draft or prerelease

5. **Upload Release Assets**
    - `{plugin-name}-{version}.zip` - Complete plugin package
    - `main.js` - Bundled plugin code
    - `manifest.json` - Plugin metadata

### Manual Release Steps

If you need to release manually:

#### 1. Update Version

Update version in both files:

-   `manifest.json` - Update `version` field
-   `versions.json` - Add new version entry

#### 2. Build for Production

```bash
npm run build
```

#### 3. Create Release Package

```bash
# Create plugin folder
mkdir auto-note-mover

# Copy required files
cp main.js manifest.json auto-note-mover/

# Create ZIP archive
zip -r auto-note-mover.zip auto-note-mover/
```

#### 4. Create GitHub Release

1. Go to GitHub repository â†’ Releases
2. Click "Draft a new release"
3. Create and select a tag (e.g., `1.2.0`)
4. Release title: Same as tag
5. Attach files:
    - `auto-note-mover-{version}.zip`
    - `main.js`
    - `manifest.json`
6. Publish release

## Release Requirements

### Required Files in Release

-   **main.js** - Bundled plugin code (generated by build)
-   **manifest.json** - Plugin metadata and version
-   **styles.css** - (Optional) Plugin styles

### Version Compatibility

-   Specified in `manifest.json`:
    ```json
    {
    	"minAppVersion": "0.12.0"
    }
    ```
-   Plugin requires Obsidian v0.12.0 or higher

## Distribution Channels

### Community Plugin Directory

For inclusion in Obsidian's official community plugin directory:

1. **Submit to obsidian-releases repository**

    - Fork: `https://github.com/obsidianmd/obsidian-releases`
    - Add plugin to `community-plugins.json`
    - Submit pull request

2. **Requirements:**
    - Published GitHub release
    - README.md with clear description
    - manifest.json with correct metadata
    - License file (MIT)

### Manual Installation (Users)

Users can install manually by:

1. Download latest release ZIP
2. Extract to vault's `.obsidian/plugins/` directory
3. Enable in Obsidian settings

## Environment Variables

### GitHub Actions

-   **PLUGIN_NAME:** `auto-note-mover` (set in workflow)
-   **GITHUB_TOKEN:** Automatically provided by GitHub Actions

## Infrastructure

### Hosting

-   **Code:** GitHub repository (`devkade/obsidian-auto-note-mover-plus`)
-   **Releases:** GitHub Releases
-   **Distribution:** Obsidian Community Plugins (if accepted)

### CI/CD Platform

-   **GitHub Actions** (Ubuntu latest runner)
-   No external CI/CD services required

## Build Artifacts

### Production Build Output

```
main.js              # Bundled and minified plugin code
manifest.json        # Plugin metadata (versioned)
```

### Build Configuration

-   **Bundler:** esbuild
-   **Target:** ES2016
-   **Format:** CommonJS
-   **Tree Shaking:** Enabled
-   **Source Maps:** Disabled in production

## Versioning Strategy

### Version Format

Follows Semantic Versioning (semver): `MAJOR.MINOR.PATCH`

**Current Version:** 1.2.0

### Version Files

-   `manifest.json` - Primary version source
-   `versions.json` - Version compatibility matrix
-   Git tags - Release markers

### Version Update Checklist

-   [ ] Update `manifest.json` version
-   [ ] Update `versions.json` with new entry
-   [ ] Commit version changes
-   [ ] Create and push Git tag
-   [ ] Wait for GitHub Actions to complete
-   [ ] Verify release assets on GitHub

## Testing Before Release

### Pre-Release Checklist

-   [ ] Run production build: `npm run build`
-   [ ] Verify no TypeScript errors
-   [ ] Test plugin in Obsidian test vault
-   [ ] Verify all features work as expected
-   [ ] Check manifest.json metadata
-   [ ] Ensure README is up to date

## Rollback Procedure

If a release has issues:

1. **Delete the problematic release** (GitHub UI)
2. **Delete the Git tag:**
    ```bash
    git tag -d {version}
    git push origin :refs/tags/{version}
    ```
3. **Fix issues in code**
4. **Release new patch version**

## Monitoring

### Release Verification

After automated release:

1. Check GitHub Actions workflow status
2. Verify release created successfully
3. Download and test release assets
4. Check that all three files are attached:
    - ZIP file
    - main.js
    - manifest.json

### Download Statistics

-   Track downloads via GitHub Releases page
-   Monitor issues/feedback from users

## Security

### Secrets Management

-   No API keys or secrets required for build
-   GitHub token automatically provided by Actions
-   No environment variables needed

### Code Signing

-   Not applicable for Obsidian plugins
-   Distributed via GitHub releases (verified by GitHub)

## Support and Maintenance

**Repository:** https://github.com/devkade/obsidian-auto-note-mover-plus
**Author:** devkade
**License:** MIT

For issues or feature requests, use GitHub Issues.
